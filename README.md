# HexCore

HexCore — это онлайн арена танковых сражений в одном большом мире. Каждый, кто заходит в игру, сражается с другими игроками в реальном времени.

## Требования
- Node.js >= 20
- npm >= 9

## Структура проекта
- `server/` — сервер на Express + Socket.IO. Также собирает клиентские ассеты (JS/CSS) в `server/dist` через Webpack.
- `client/` — исходники клиента (JS/LESS, HTML-шаблон).

## Быстрый старт (локально)
1) Установка зависимостей
```
cd server && npm ci
cd ../client && npm ci
```
2) Сборка клиентских ассетов и старт сервера
```
cd ../server
npm run build
npm start
```
3) Откройте `http://localhost:5000`

По умолчанию сервер слушает порт из переменной `PORT` или `5000`.

## Разработка
- Клиент:
  - Исходники: `client/src/**`, стили: `client/less/**`.
  - Для пересборки ассетов используйте из директории `server/`:
    - Однократно: `npm run build`
    - Непрерывно: `npx webpack --watch`
- Сервер:
  - Исходники: `server/server/**`, утилиты: `server/lib/**`, шаблон: `server/views/index.html`.
  - Перезапустите `npm start` после изменений серверного кода или используйте свой процесс‑менеджер (например, `nodemon`).

### Настройка подключения клиента
Файл `client/config.json`:
```
{
  "serverUrl": ""
}
```
- Пустая строка означает подключение к тому же хосту/порту, откуда загружена страница (рекомендуется при работе через `server/`).
- Если клиент обслуживается отдельно (другая статика/домен), укажите, куда подключаться Socket.IO, например:
```
{ "serverUrl": "http://localhost:5000" }
```

## Скрипты
- В `server/`:
  - `npm run build` — сборка клиентских ассетов в `server/dist` (Webpack, режим development по умолчанию).
  - `npm start` — запуск сервера (`server.js`).
  - `npm postinstall` — авто‑сборка при установке зависимостей.
- В `client/`:
  - `npm run start` — запуск webpack-dev-server (порт 8000). Требует ручной настройки `client/config.json` и статики, поэтому для игры рекомендуется запуск через `server/`.
  - `npm run build` — сборка клиентской статики в `client/public`.

## Линтинг
В каталоге `server/` настроен ESLint. Запустить:
```
cd server
npx eslint .
```

## Вклад (Contributing)
- Форкните репозиторий и настройте проект локально.
- Вносите изменения в своей ветке и отправляйте Pull Request в `main`.
- Ищите `TODO` через `git grep`.
- Код проходит ревью перед слиянием.

## Лицензия
MIT © 2025 NobidoNs
